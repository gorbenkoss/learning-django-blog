{% load blog_extras %}
{% for post in posts %}
<div class='post'>
    <h2><a href="{% url 'post-detail' pk=post.pk %}">{{ post.title }}</a></h2>
    <p>{{ post.content }}</p>
    <p><small>Posted: {{ post.date_posted|format_post_date }}</small></p>
    <p><small>Posted by: <a href="{% url 'account' username=post.author%}">{{ post.author }}</a></small></p>
    <button onclick="sendReaction({{ post.id }}, true)">Like</button>
    <button onclick="sendReaction({{ post.id }}, false)">Dislike</button>
    <!-- Display current rating, which will be updated dynamically -->
    <p id="rating-{{ post.id }}">Rating: {{ post.rating }}</p>   
     <!-- Check if the user is authenticated and is the author of the post -->
    {% if user.is_authenticated and post.author == user %}
    <a href="{% url 'post-edit' pk=post.pk %}"><button>Edit</button></a>
    {% endif %}       
</div>
{% endfor %} 